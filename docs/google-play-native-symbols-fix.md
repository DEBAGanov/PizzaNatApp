# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–º–≤–æ–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –≤ Google Play Console

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ App Bundle –≤ Google Play Console –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:

```
‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!
–≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç (App Bundle) —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª —Å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –≤—ã—è–≤–ª–µ–Ω–∏–µ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Å–±–æ–µ–≤ –∏ –æ—à–∏–±–æ–∫ ANR.
```

## –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- **Room Database** - SQLite –Ω–∞—Ç–∏–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- **Coil** - –Ω–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–∫–æ–¥–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **OkHttp** - –Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Google Play Services** - –Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Android

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `app/build.gradle.kts`

#### –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∏–º–≤–æ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è Release –∏ Staging:
```kotlin
release {
    // –í–∫–ª—é—á–∞–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞
    ndk {
        debugSymbolLevel = "FULL"
    }
}

staging {
    // –í–∫–ª—é—á–∞–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞
    ndk {
        debugSymbolLevel = "FULL"
    }
}
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Android App Bundle:
```kotlin
bundle {
    density {
        enableSplit = true
    }
    abi {
        enableSplit = true
    }
    language {
        enableSplit = false
    }
}
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:
```kotlin
androidComponents {
    onVariants(selector().withBuildType("release")) { variant ->
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ bundle
        variant.packaging.resources.pickFirsts.add("**/libc++_shared.so")
    }
}
```

### 2. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏

#### –°–æ–∑–¥–∞–Ω–∏–µ Release Bundle —Å —Å–∏–º–≤–æ–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏:
```bash
./gradlew :app:bundleRelease
```

#### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞:
```
./app/build/outputs/bundle/release/app-release.aab
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **App Bundle —Å —Å–∏–º–≤–æ–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏** –≥–æ—Ç–æ–≤ –∫ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ **–†–∞–∑–º–µ—Ä**: ~2.81 –ú–ë (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)
- ‚úÖ **–í—Ä–µ–º—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è**: ~1 —Å–µ–∫
- ‚úÖ **–û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã**: –í–∫–ª—é—á–µ–Ω—ã –¥–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: API 25+ (Android 7.1+)

## üîó –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Android App Optimization](https://developer.android.com/topic/performance/app-optimization/enable-app-optimization?hl=ru#native-crash-support)
- [Google Play Console - Native Symbol Files](https://play.google.com/console/)
- [Android App Bundle Guide](https://developer.android.com/guide/app-bundle)

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –°–æ–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π bundle: `./gradlew :app:bundleRelease`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ `app-release.aab` –≤ Google Play Console
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏—Å—á–µ–∑–ª–æ
4. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 30.01.2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ—à–µ–Ω–æ  
**–í–µ—Ä—Å–∏—è**: 1.0.1 (versionCode 3) 